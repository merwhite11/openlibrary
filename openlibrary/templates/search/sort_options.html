$def with (exclude, default)

$ sort = 'sort'

<span class="tools"><img src="/images/icons/icon_sort.png" alt="$_('Sorting by')" width="9" height="11" style="margin-right:10px;"/>
    $code:
      sort_options = [
        { 'sort': None, 'name': _("Relevance"), 'ga_key': 'Relevance' },
        { 'sort': 'editions', 'name': _("Most Editions"), 'ga_key': 'Editions' },
        { 'sort': 'old', 'name': _("First Published"), 'ga_key': 'Old' },
        { 'sort': 'new', 'name': _("Most Recent"), 'ga_key': 'New' },
        { 'sort': 'random', 'name': _("Random"), 'ga_key': 'Random', 'selected': sort and sort.startswith('random') },
      ]
    $for sort_option in sort_options:
      $ is_selected = sort_option.get('selected') or sort_option['sort'] == sort
      $if is_selected:
          <strong class="lightgreen">$sort_option['name']</strong>
      $else:
          <a href="$changequery(sort=sort_option['sort'])"
             data-ol-link-track="SearchSort|$sort_option['ga_key']"
          >$sort_option['name']</a>
      $if not loop.last:
          |
    $if sort and sort.startswith('random'):
      (<a href="$changequery(sort='random_%s' % today().timestamp())"
         data-ol-link-track="SearchSort|RandomShuffle"
      >$_('Shuffle')</a>)
</span>