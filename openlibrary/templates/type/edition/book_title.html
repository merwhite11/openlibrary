$def with (work, edition)

$ book_title = edition.get('title', '') or (work.title if work else '')

<h1 class="work-title" itemprop="name">$book_title</h1>

$if edition:
  $if edition.subtitle or edition.edition_title or edition.edition_name:
    <h2 class="work-subtitle">
      $if edition.subtitle:
        $edition.subtitle
      $if edition.edition_title or edition.edition_name:
        $if edition.subtitle:
          &mdash;
        $edition.edition_title $edition.edition_name
