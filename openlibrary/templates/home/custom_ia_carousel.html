$def with(title, key, query=None, subject=None, work_id=None, _type=None, sorts=None, limit=None, test=False)

$ url = compose_ia_url(query=query, subject=subject, work_id=work_id, _type=_type, sorts=sorts, limit=limit, advanced=False)
$ books = generic_carousel(key, query=query, subject=subject, work_id=work_id, _type=_type, sorts=sorts, limit=limit)

$if test or (books and len(books) > 5):
  <div class="clearfix">
    $:render_template("home/carousel", title, url, books, key, test=test)
  </div>
