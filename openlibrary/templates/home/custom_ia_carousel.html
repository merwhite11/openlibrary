$def with(title, key, query=None, subject=None, work_id=None, _type=None, sorts=None, limit=None, min_books=7, slick=True, test=False)

$ url = compose_ia_url(query=query, subject=subject, work_id=work_id, _type=_type, sorts=sorts, limit=limit, advanced=False)
$ books = generic_carousel(query=query, subject=subject, work_id=work_id, _type=_type, sorts=sorts, limit=limit) if not test else []

$if slick:
    $:render_template("books/custom_carousel", books, title=title, url=url, key=key, min_books=min_books, test=test)
$else:
    $:render_template("home/carousel", title, url, books, key, min_books=min_books, test=test)
