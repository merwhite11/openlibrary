$def with (stats=None, blog_posts=None, test=False)

$ _x = ctx.setdefault('cssfile', 'home')
$var title: $_("Welcome to Open Library")

$ meta_description = "Open Library is an open, editable library catalog, building towards a web page for every book ever published."
$ meta_image_url = "https://openlibrary.org/static/images/ol-banner.png"

$add_metatag(property="og:title", content="OpenLibrary.org")
$add_metatag(property="og:description", content=meta_description)
$add_metatag(property="og:image", content=meta_image_url)
$add_metatag(property="og:url", content="https://openlibrary.org")
$add_metatag(property="og:site_name", content="Open Library")

$add_metatag(name="twitter:image:alt", content="Open Library Logo")
$add_metatag(name="twitter:card", content="homepage_summary")

$code:
  MONTHLY_READS = {
    2: {
        'title': _('Books for February'),
        'url': '/collections/february',
        'query': 'key:(/works/OL18181363W OR /works/OL3481095W OR /works/OL4360244W OR /works/OL20017931W OR /works/OL20615204W OR /works/OL2363176W OR /works/OL17869588W OR /works/OL17784026W OR /works/OL21179764W OR /works/OL8870595W OR /works/OL21054973W OR /works/OL21673730W OR /works/OL20548582W OR /works/OL15279153W OR /works/OL19992836W OR /works/OL15691480W OR /works/OL16305795W OR /works/OL19923407W OR /works/OL16529029W OR /works/OL9242636W OR /works/OL17529769W OR /works/OL3345332W OR /works/OL20013209W OR /works/OL20015483W OR /works/OL19987474W OR /works/OL19992114W OR /works/OL17893900W OR /works/OL18435803W OR /works/OL17314666W OR /works/OL17358927W OR /works/OL15933199W OR /works/OL17858931W OR /works/OL18187603W OR /works/OL16853133W OR /works/OL16894393W OR /works/OL19976062W OR /works/OL20037832W OR /works/OL16885033W OR /works/OL19708155W OR /works/OL17921756W OR /works/OL21037237W OR /works/OL17786027W OR /works/OL17345141W OR /works/OL21294275W OR /works/OL9582417W OR /works/OL9357555W OR /works/OL20907853W OR /works/OL20005568W OR /works/OL3296483W OR /works/OL11983310W OR /works/OL7159886W OR /works/OL1662667W OR /works/OL19990553W OR /works/OL15285884W OR /works/OL6888879W OR /works/OL17900435W OR /works/OL5706069W OR /works/OL2977589W OR /works/OL1593701W OR /works/OL16451688W OR /works/OL16910779W OR /works/OL18215336W OR /works/OL17371695W OR /works/OL3521634W OR /works/OL17355199W OR /works/OL5739152W OR /works/OL20016962W OR /works/OL3191599W OR /works/OL20896695W OR /works/OL19752490W OR /works/OL18335154W OR /works/OL4582875W OR /works/OL16515210W OR /works/OL16868407W OR /works/OL3459949W OR /works/OL16025481W OR /works/OL1928280W OR /works/OL6208302W OR /works/OL17566265W OR /works/OL20652811W OR /works/OL22059158W OR /works/OL4370955W OR /works/OL19998526W OR /works/OL6218060W OR /works/OL16813953W OR /works/OL21179974W OR /works/OL7213898W OR /works/OL17872185W OR /works/OL17340085W OR /works/OL21584979W OR /works/OL21078916W OR /works/OL158519W OR /works/OL4114499W OR /works/OL19638041W OR /works/OL16844793W OR /works/OL20940485W OR /works/OL17392121W OR /works/OL20030448W OR /works/OL15920474W OR /works/OL20544657W)'
    },
    3: {
        'title': _('Books for March'),
        'url': '/collections/march',
        'query': 'key:(/works/OL5184754W OR /works/OL133486W OR /works/OL1112900W OR /works/OL15302479W OR /works/OL5353481W OR /works/OL1684657W OR /works/OL16612125W OR /works/OL2987652W OR /works/OL15243975W OR /works/OL5827897W OR /works/OL237034W OR /works/OL20916117W OR /works/OL1881592W OR /works/OL16561534W OR /works/OL17893247W OR /works/OL7000994W OR /works/OL16247899W OR /works/OL19163127W OR /works/OL1146619W OR /works/OL2231866W OR /works/OL1853601W OR /works/OL1794792W OR /works/OL2750502W OR /works/OL1825970W OR /works/OL17991110W OR /works/OL34442W OR /works/OL20886755W OR /works/OL1880057W OR /works/OL9221039W OR /works/OL4782577W OR /works/OL15230140W OR /works/OL7899614W OR /works/OL508764W OR /works/OL18165887W OR /works/OL17538396W OR /works/OL53994W OR /works/OL11817902W OR /works/OL5118902W OR /works/OL68789W OR /works/OL8874375W OR /works/OL158240W OR /works/OL3474021W OR /works/OL3352379W OR /works/OL1826369W OR /works/OL106972W OR /works/OL20623337W OR /works/OL2624393W OR /works/OL47755W OR /works/OL514392W OR /works/OL18820761W OR /works/OL85496W OR /works/OL21625058W OR /works/OL1833297W OR /works/OL15162472W OR /works/OL16289374W OR /works/OL15100036W OR /works/OL17311133W OR /works/OL1826373W OR /works/OL3255337W OR /works/OL7113090W OR /works/OL5408044W OR /works/OL4702292W OR /works/OL8269570W OR /works/OL2626142W OR /works/OL9399062W OR /works/OL6670269W OR /works/OL890505W OR /works/OL523724W OR /works/OL6218068W OR /works/OL1469543W OR /works/OL1001250W OR /works/OL20004703W OR /works/OL679942W OR /works/OL2044569W OR /works/OL15980420W OR /works/OL20016033W OR /works/OL565273W OR /works/OL20019003W OR /works/OL18820945W OR /works/OL3945614W OR /works/OL64468W OR /works/OL5754207W OR /works/OL6218046W OR /works/OL18183638W OR /works/OL21182317W OR /works/OL169921W OR /works/OL6384123W OR /works/OL1870681W OR /works/OL16245602W OR /works/OL17676089W OR /works/OL20848500W OR /works/OL4304829W OR /works/OL17873811W OR /works/OL4968024W OR /works/OL20001088W OR /works/OL3142310W OR /works/OL142101W OR /works/OL19396225W OR /works/OL1230977W OR /works/OL17332299W)'
    },
    4: {
      'title': _('Books for April'),
      'url': '/collections/april',
      'query': 'key:(/works/OL6934547W OR /works/OL2000340W OR /works/OL2746188W OR /works/OL2921990W OR /works/OL11476041W OR /works/OL8676892W OR /works/OL1895089W OR /works/OL8463108W OR /works/OL1916767W OR /works/OL17328163W OR /works/OL34364W OR /works/OL2384851W OR /works/OL79422W OR /works/OL142101W OR /works/OL5719058W OR /works/OL548264W OR /works/OL15120217W OR /works/OL14952471W OR /works/OL15188310W OR /works/OL1855830W OR /works/OL3147556W OR /works/OL5843701W OR /works/OL20479918W OR /works/OL17864309W OR /works/OL5857644W OR /works/OL18174472W OR /works/OL13750798W OR /works/OL14869488W OR /works/OL15844569W OR /works/OL510286W OR /works/OL2650512W OR /works/OL83989W OR /works/OL1914072W OR /works/OL5097914W OR /works/OL1927820W OR /works/OL112630W OR /works/OL6218052W OR /works/OL12992964W OR /works/OL8460319W OR /works/OL308951W OR /works/OL14909580W OR /works/OL17077479W OR /works/OL4445284W OR /works/OL17437756W OR /works/OL8193508W OR /works/OL5590179W OR /works/OL166683W OR /works/OL83989W OR /works/OL45869W OR /works/OL3840897W OR /works/OL15289753W OR /works/OL22056274W OR /works/OL2279297W OR /works/OL71856W OR /works/OL45790W OR /works/OL6704886W OR /works/OL9770557W OR /works/OL524611W OR /works/OL45709W OR /works/OL66562W OR /works/OL8455191W OR /works/OL15065463W OR /works/OL1173603W OR /works/OL15692492W OR /works/OL25860W OR /works/OL53908W OR /works/OL2342157W OR /works/OL17324165W OR /works/OL261405W OR /works/OL17324092W OR /works/OL263663W OR /works/OL2695471W OR /works/OL587092W OR /works/OL2695710W OR /works/OL20892865W OR /works/OL15392519W OR /works/OL138536W OR /works/OL88641W OR /works/OL151924W OR /works/OL15021422W OR /works/OL9355810W OR /works/OL5097109W OR /works/OL3368666W OR /works/OL50625W OR /works/OL8076534W OR /works/OL17059208W OR /works/OL3974810W OR /works/OL1910135W OR /works/OL201059W OR /works/OL100672W OR /works/OL17900251W OR /works/OL54031W OR /works/OL76590W OR /works/OL17063120W OR /works/OL3288436W OR /works/OL997592W OR /works/OL19360441W OR /works/OL17857052W OR /works/OL1993508W OR /works/OL17872769W)'
    },
    5: {
      'title': _('Books for May'),
      'url': '/collections/may',
      'query': 'key:(/works/OL450777W OR /works/OL362289W OR /works/OL4077051W OR /works/OL2715009W OR /works/OL2205289W OR /works/OL158953W OR /works/OL4662884W OR /works/OL222799W OR /works/OL5859708W OR /works/OL19659784W OR /works/OL2765935W OR /works/OL15834136W OR /works/OL513969W OR /works/OL98501W OR /works/OL464991W OR /works/OL8193418W OR /works/OL61324W OR /works/OL1870400W OR /works/OL50829W OR /works/OL66531W OR /works/OL5717098W OR /works/OL61921W OR /works/OL5475081W OR /works/OL875437W OR /works/OL6034514W OR /works/OL523452W OR /works/OL7711724W OR /works/OL1854080W OR /works/OL9347808W OR /works/OL2676023W OR /works/OL6218070W OR /works/OL10432709W OR /works/OL804244W OR /works/OL12497W OR /works/OL77792W OR /works/OL2721005W OR /works/OL4661335W OR /works/OL831059W OR /works/OL2731827W OR /works/OL21522W OR /works/OL482313W OR /works/OL97440W OR /works/OL3943151W OR /works/OL3521874W OR /works/OL2715015W OR /works/OL66544W OR /works/OL433123W OR /works/OL2068683W OR /works/OL6322288W OR /works/OL1971683W OR /works/OL1069667W OR /works/OL2438133W OR /works/OL17272376W OR /works/OL16482241W OR /works/OL15860364W OR /works/OL151996W OR /works/OL6740249W OR /works/OL15040422W OR /works/OL16069155W OR /works/OL508163W OR /works/OL3291229W OR /works/OL61003W OR /works/OL98491W OR /works/OL5888555W OR /works/OL5827913W OR /works/OL17933404W OR /works/OL1095427W OR /works/OL54915W OR /works/OL13114894W OR /works/OL24338132W OR /works/OL1872916W OR /works/OL15840480W OR /works/OL184431W OR /works/OL2940316W OR /works/OL2647505W OR /works/OL259028W OR /works/OL14915863W OR /works/OL29462W OR /works/OL1734184W OR /works/OL675449W OR /works/OL18591W OR /works/OL221675W OR /works/OL5704260W OR /works/OL15717066W OR /works/OL3863998W OR /works/OL2619717W OR /works/OL64151W OR /works/OL12826W OR /works/OL547889W OR /works/OL66534W OR /works/OL15952404W OR /works/OL2155632W OR /works/OL69503W OR /works/OL61215W OR /works/OL112890W OR /works/OL66562W OR /works/OL15837476W OR /works/OL15178362W OR /works/OL2046569W OR /works/OL2031517W)'
    }
  }
$ monthly_reads = MONTHLY_READS.get(today().month)

<div id="contentBody">
  $:render_template("home/categories", test=test)

  $:render_template("books/custom_carousel", books=readonline_carousel(), title=_('Classic Books'), url="/read", key="public_domain", test=test)

  $if monthly_reads and not test:
    $:macros.QueryCarousel(query=monthly_reads['query'], title=monthly_reads['title'], key="monthly_reads", url=monthly_reads['url'], sort='random.hourly')
    
  $:render_template("home/custom_ia_carousel", title=_('Books We Love'), key="staff_picks", query='languageSorter:("English")', subject="openlibrary_staff_picks", sorts=["lending___last_browse desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title=_('Recently Returned'), key="recently_returned", sorts=["lending___last_browse desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title=_('Romance'), key="romance", query="subject:(romance)", sorts=["lending___last_browse desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title=_('Kids'), key="children", query="subject:(Juvenile Fiction)", sorts=["lending___last_browse desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title=_('Thrillers'), key="thrillers", query="preset:thrillers", sorts=["downloads desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title=_('Textbooks'), key="textbooks", subject="textbooks", sorts=["lending___last_browse desc"], limit=18, test=test)

  $:render_template("home/custom_ia_carousel", title="Authors Alliance & MIT Press", key="authorsalliance_mit_press", query="preset:authorsalliance_mitpress", limit=18, test=test)

  $:render_template("home/stats", stats)

  $:render_template("home/about", blog_posts)
 </div>
