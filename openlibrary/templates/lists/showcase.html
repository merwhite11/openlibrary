$def with (lists, username)


$def list_card(list):
    $ cached_info = list.get_patron_showcase()
    $ count = cached_info["count"]
    <a class="list-card" href="$list.get_url()">
        <div class="list-card__name-tag">
            <p class="list-card__title">$cached_info["title"]</p>
            <p class="list-card__num-books">
                $ungettext("%(count)d book", "%(count)d books", count, count=count)
            </p>
        </div>
        <div class="list-card__covers">
            $for img_url in cached_info["covers"]:
                <img src="$(img_url or '/images/icons/avatar_book-sm.png')" loading="lazy">
        </div>
    </a>


<div class="carousel-section">
    <div class="carousel-section-header">
        <h2 class="home-h2">
            <a href="/people/$username/lists">$_('My Lists (%(count)d)', count=len(lists))</a>
        </h2>
    </div>
    <div class="list-showcase">
        $if lists:
            $ displayed_lists = lists[0:min(len(lists), 5)]
            $for list in displayed_lists:
                $:list_card(list)
        $else:
            <p>$_('You have no lists.')</p>
    </div>
</div>
